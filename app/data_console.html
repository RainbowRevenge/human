{% extends "layout.html"%}
{% block scripts%}
{{super()}}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script type="text/javascript">
  $(document).ready(function () {
    $(document).on('click', '#remove_file', function () {
      $(this).closest('div').remove()
    });
  });

  $(document).ready(function () {
    $(document).on('click', '#more_files', function () {
      var $clone = $('<div class="div_file form-group form-inline btn col"></div>');
      $clone.append('<input type="file" name="files[]" class="form-control btn btn-outline-secondary" multiple>');
      $clone.append(" <a href=# id='remove_file' style='color:red'><img src=\"{{url_for('.static', filename='remove.png')}}\" alt='Remove files' style='width:20px;''></a><br/>");
      $clone.insertBefore('form p:last');
    });
  });
</script>
{% endblock %}

{% block content %}
{% if success%}
<p style="color:green"> {{ success }}</p>
{% endif %}
{% if error %}
<p style="color:red"> {{ error }}</p>
{% endif %}
<br />
<div class='container'>
  <div class="row ">
    <div class="col card-body">
      <p class="text-center"><h3>Data Console</h3></p>
    </div>
  </div>
  <div class='row'>
    <div class="col card text-center">
      <div class="card-body">
        <a data-toggle="collapse" href="#annotations-table" role="button" aria-expanded="false" aria-controls="annotations-table"><h3>Annotations</h3></a>
        {% if annotations %}
        <div class="collapse" id="annotations-table">
          <table class="table table-striped">
            <thead>
              <tr>
                {% for header in annotations[0] %}
                <th>{{header}}</th>
                {% endfor %}
              </tr>
            </thead>
            <tbody>
              {% for record in annotations %}
              <tr>
                {% for key in record %}
                <td>{{record[key]}}</td>
                {% endfor %}
              </tr>
              {% endfor %}
            </tbody>
          </table>
      </div>
      {% else %}
        No annotations available yet.
      {% endif %}
      </div>
    </div>
  </div>
  <br>
  <div class='row'>
    <div class="col card text-center">
      <div class="card-body">
        <a data-toggle="collapse" href="#data-table" role="button" aria-expanded="false" aria-controls="data-table"><h3>Data</h3></a>
        {% if data %}
        <div class="collapse" id="data-table">
          <table class="table table-striped">
            <thead>
              <tr>
                {% for header in data[0] %}
                <th>{{header}}</th>
                {% endfor %}
              </tr>
            </thead>
            <tbody>
              {% for record in data %}
              <tr>
                {% for key in record %}
                <td>{{record[key]}}</td>
                {% endfor %}
              </tr>
              {% endfor %}
            </tbody>
          </table>
      </div>
      {% else %}
        No data available yet.
      {% endif %}
      </div>
    </div>
  </div>
  <br />
  <div class='row'>
    <div class="col card text-center">
      <div class="card-body">
        <h3>Download data</h3>
        <form action="/data_download" method="POST" enctype=multipart/form-data class="form-group">
          <input type="submit" value="Download data" class="btn btn-primary">
        </form>
      </div>
    </div>
  </div>
  <br />
</div>
{% endblock %}
